<div class="flex min-h-screen layout-wrapper">
  <!-- Sidebar -->
  <div
    class="layout-sidebar flex flex-col justify-between h-screen w-64 bg-white shadow-lg transition-all duration-300 transform hover:-translate-y-0.5"
  >
    <!-- ส่วนบน: Logo + Menu -->
    <div>
      <!-- Logo Section -->
      <div
        class="flex flex-col items-center justify-center py-6 bg-gradient-to-b from-[#EDE9FE] to-[#D8B4FE] text-[#5D3B80] rounded-lg shadow-lg transition-all duration-300 transform hover:-translate-y-1"
      >
        <div class="relative p-2 bg-white rounded-full shadow-md">
          <img
            src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSkD6uHvGfzNhAJddd7itFnaML91j942cAnaw&s"
            alt="Logo"
            class="object-cover w-20 h-20 rounded-full"
          />
        </div>
        <div class="mt-3 text-xl font-semibold">AR Internship</div>
        <div class="flex items-center gap-3 mt-3">
          <div
            class="flex items-center justify-center w-10 h-10 transition-all duration-300 transform bg-blue-500 rounded-full shadow-md hover:-translate-y-1"
          >
            <i class="text-white pi pi-user"></i>
          </div>
          <div>
            <p class="font-semibold text-blue-900">
              {{ currentUser?.fullname }}
            </p>
            <p class="text-sm text-blue-700">
              สิทธิ์:
              <span
                [class]="
                  isAdmin
                    ? 'text-red-600 font-bold'
                    : 'text-green-600 font-bold'
                "
              >
                {{ isAdmin ? "ผู้ดูแลระบบ (Admin)" : "ผู้ใช้ทั่วไป (User)" }}
              </span>
            </p>
          </div>
        </div>
      </div>

      <!-- Menu Items -->
      <ul class="flex flex-col gap-1 px-2 mt-4 layout-menu">
        <li *ngFor="let item of sidebarItems">
          <!-- Main Menu Item without Submenu -->
          <a
            *ngIf="!item.submenu"
            [routerLink]="item.routerLink"
            class="layout-menuitem-link flex items-center gap-3 px-4 py-2 rounded transition-all duration-300 transform hover:-translate-y-1 hover:shadow-md hover:bg-[#E0F2FE] hover:text-[#1E3A8A] font-medium cursor-pointer"
          >
            <i [class]="item.icon"></i>
            <span class="menu-label">{{ item.label | translate }}</span>
          </a>

          <!-- Menu with Submenu -->
          <div *ngIf="item.submenu">
            <div
              (click)="toggleSubmenu(item)"
              class="layout-menuitem-link flex items-center justify-between gap-3 px-4 py-2 rounded transition-all duration-300 transform hover:-translate-y-1 hover:shadow-md hover:bg-[#E0F2FE] hover:text-[#1E3A8A] font-medium cursor-pointer"
            >
              <div class="flex items-center gap-3">
                <i [class]="item.icon"></i>
                <span class="menu-label">{{ item.label | translate }}</span>
              </div>
              <i
                [class]="item.expanded ? 'pi pi-chevron-down' : 'pi pi-chevron-right'"
                class="text-sm transition-transform duration-300"
              ></i>
            </div>

            <!-- Submenu -->
            <ul
              *ngIf="item.expanded"
              [@slideDown]
              class="flex flex-col gap-1 mt-1 ml-4 transition-all duration-300 ease-in-out submenu"
            >
              <li *ngFor="let subitem of item.submenu">
                <a
                  [routerLink]="subitem.routerLink"
                  class="flex items-center gap-3 px-4 py-2 rounded text-sm transition-all duration-200 hover:bg-[#DBEAFE] hover:text-[#1E40AF] hover:translate-x-1 cursor-pointer"
                >
                  <i [class]="subitem.icon" class="text-xs"></i>
                  <span>{{ subitem.label | translate }}</span>
                </a>
              </li>
            </ul>
          </div>
        </li>
      </ul>
    </div>

    <!-- ส่วนล่าง: Logout Button -->
    <div class="px-4 pb-4">
      <button
        (click)="logout()"
        class="flex items-center justify-center w-full gap-2 px-4 py-2 font-semibold text-red-500 transition-all duration-200 transform border-2 border-blue-300 rounded shadow-lg bg-primary hover:bg-secondary hover:shadow-2xl hover:-translate-y-1"
      >
        <i class="pi pi-sign-out"></i>
        Logout
      </button>
    </div>
  </div>

  <!-- Main Content -->
  <div class="flex flex-col flex-1 layout-main bg-background">
    <!-- Topbar / Menubar -->
    <div
      class="flex items-center justify-end p-4 transition-all duration-300 transform bg-white border-none menubar-header hover:-translate-y-1"
    >
    </div>

    <!-- Router Outlet + Footer -->
    <div
      class="flex-1 p-4 mx-4 mt-3 overflow-auto transition-all duration-300 transform rounded-lg shadow-lg bg-background hover:-translate-y-1"
    >
      <router-outlet></router-outlet>
      <app-footer></app-footer>
    </div>
  </div>
</div>
